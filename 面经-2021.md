# 2021.01.09
## 阿里云一面
问：多个业务功能，spring层面怎么分发请求？策略模式怎么用？如果功能发生增删该怎么处理。
答：

问：组合索引列的顺序怎么设计。不是根据长度。根据区分度。
答：常用列放在前面；区分度高的列放在前面（重复值少，比如主键、唯一键。时间字段不适合放在索引的左侧）。

问：订单表很大，遇到什么性能问题？如何优化？（冷数据归档、分表）冷数据就不要放缓存了。
答：订单表归档，三个月前的订单移到归档表。如果必须分表，可以根据accountId进行分库分表。

问：查询优化有哪些手段？lucence的原理是什么？
答：如果建索引不能满足查询需求，可以把数据导入ElasticSearch进行查找。

问：分表中间件有哪些，使用proxy中间件比起sdk方式有什么优势？
答：

问：分表以后，怎么解决数据的幂等性问题。分表后，根据唯一索引去重还行吗？
答：

问：rabbitmq的事务特性实现原理。
答：

问：消费端重试数次后依然失败，如何保证最终一致？
答：

问：除了本地消息表还有哪些一致性手段？为什么没用2PC？
答：

面试组所在业务：帮助电信等运营商推广商品。涉及订单流转的业务，数据一致性，